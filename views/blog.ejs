<% layout('layout') -%>
<section class="section">
  <h2>Blog Posts</h2>
  <div class="grid media-grid">
    <% posts.forEach(function(post){ %>
      <div class="card">
        <a class="card-link" href="/post/<%= post.id %>">
          <div class="card-media">
            <% const m = post.media && (post.media.find(x=>x.type==='file') || post.media.find(x=>x.type==='link')); %>
            <% if (m){ %>
              <img src="<%= (m.type==='file'? m.path : m.url) %>" alt="<%= post.title %>" />
            <% } %>
          </div>
          <div class="card-body"><strong><%= post.title %></strong></div>
        </a>
      </div>
    <% }) %>
  </div>
</section>
