<% layout('layout') -%>
<section class="section">
  <h2>All Videos</h2>
  <div class="grid media-grid">
    <% videos.forEach(function(v){ %>
      <div class="card">
        <div class="card-media">
          <% const m = v.media && (v.media.find(x=>x.type==='file') || v.media.find(x=>x.type==='link')); %>
          <% if (m){ %>
            <% if (m.type==='file'){ %>
              <video controls src="<%= m.path %>"></video>
            <% } else if (m.url.includes('youtube')){ %>
              <iframe src="<%= m.url.replace('watch?v=','embed/') %>" frameborder="0" allowfullscreen></iframe>
            <% } else { %>
              <a class="link-btn" href="<%= m.url %>" target="_blank">Open</a>
            <% } %>
          <% } %>
        </div>
        <div class="card-body"><strong><%= v.title %></strong></div>
      </div>
    <% }) %>
  </div>
</section>
